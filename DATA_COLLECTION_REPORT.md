# Trace Generator è³‡æ–™æ”¶é›†çµ±è¨ˆå ±å‘Š

**å ±å‘Šæ™‚é–“**: 2026-01-23 12:06:00  
**è³‡æ–™ä¾†æº**: tempo-latency-anomaly-service (Redis)

---

## ğŸ“Š ç¸½é«”çµ±è¨ˆ

| æŒ‡æ¨™ | æ•¸å€¼ |
|------|------|
| **ç¸½æœå‹™æ•¸** | 1 |
| **ç¸½ç«¯é»æ•¸** | 6 |
| **Baseline Keys** | 195 å€‹ |
| **Duration Keys** | 195 å€‹ |
| **æ™‚é–“æ¡¶è¦†è“‹** | 8 å°æ™‚ï¼ˆå·¥ä½œæ—¥ï¼‰ |
| **ç¸½æ¨£æœ¬æ•¸** | 4,417 å€‹ |

---

## ğŸ¯ å„ç«¯é»è©³ç´°çµ±è¨ˆ

### ç•¶å‰æ™‚é–“æ¡¶æ¨£æœ¬æ•¸ï¼ˆ12:00 å·¥ä½œæ—¥ï¼‰

| ç«¯é» | æ¨£æœ¬æ•¸ | P50 | P95 | MAD | ç‹€æ…‹ |
|------|--------|-----|-----|-----|------|
| **POST /api/order/create** | 123 | 1029ms | 1181ms | 72 | âœ… å……è¶³ |
| **GET /api/user/profile** | 120 | 220ms | 269ms | 20 | âœ… å……è¶³ |
| **POST /api/report/generate** | 120 | 2642ms | 3106ms | 210 | âœ… å……è¶³ |
| **GET /api/search** | 120 | 369ms | 449ms | 29.5 | âœ… å……è¶³ |
| **POST /api/batch/process** | 119 | 1259ms | 1742ms | 271 | âœ… å……è¶³ |
| **GET /api/simulate** | 119 | 2512ms | 14412ms | 1620 | âœ… å……è¶³ |

> ğŸ“ **æœ€å°æ¨£æœ¬æ•¸è¦æ±‚**: 50 å€‹ï¼ˆé…ç½®ï¼š`min_samples`ï¼‰  
> âœ… **æ‰€æœ‰ç«¯é»éƒ½å·²è¶…éæœ€å°æ¨£æœ¬æ•¸**

### è·¨æ‰€æœ‰æ™‚é–“æ¡¶ç¸½æ¨£æœ¬æ•¸

| ç«¯é» | ç¸½æ¨£æœ¬æ•¸ | å¹³å‡æ¯å°æ™‚ | ç™¾åˆ†æ¯” |
|------|----------|------------|--------|
| POST /api/order/create | **855** | 107 | 19.4% |
| GET /api/user/profile | **790** | 99 | 17.9% |
| POST /api/report/generate | **725** | 91 | 16.4% |
| GET /api/search | **685** | 86 | 15.5% |
| GET /api/simulate | **690** | 86 | 15.6% |
| POST /api/batch/process | **672** | 84 | 15.2% |
| **ç¸½è¨ˆ** | **4,417** | **552** | **100%** |

---

## ğŸ“ˆ æ™‚é–“æ¡¶åˆ†å¸ƒ

### å·¥ä½œæ—¥æ™‚é–“æ¡¶è¦†è“‹

å·²æ”¶é›†è³‡æ–™çš„å°æ™‚æ®µï¼š

```
 9:00 âœ…  12:00 âœ…  13:00 âœ…  14:00 âœ…
15:00 âœ…  16:00 âœ…  17:00 âœ…  18:00 âœ…
```

**è¦†è“‹ç‡**: 8/24 å°æ™‚ (33%)

### å¯ç”¨çš„æœå‹™ç«¯é»çµ„åˆ

æ ¹æ“š `/v1/available` API è¿”å›çš„è³‡æ–™ï¼š

- **trace-demo-service**
  - âœ… GET /api/search (8 å€‹æ™‚é–“æ¡¶)
  - âœ… GET /api/simulate (8 å€‹æ™‚é–“æ¡¶)
  - âœ… GET /api/user/profile (8 å€‹æ™‚é–“æ¡¶)
  - âœ… POST /api/batch/process (8 å€‹æ™‚é–“æ¡¶)
  - âœ… POST /api/order/create (8 å€‹æ™‚é–“æ¡¶)
  - âœ… POST /api/report/generate (8 å€‹æ™‚é–“æ¡¶)

---

## ğŸ” æ•ˆèƒ½æŒ‡æ¨™åˆ†æ

### å„ç«¯é»å›æ‡‰æ™‚é–“ç‰¹å¾µ

#### 1. POST /api/order/create
- **ä¸­ä½æ•¸ (P50)**: 1029ms
- **95ç™¾åˆ†ä½ (P95)**: 1181ms
- **ç©©å®šåº¦ (MAD)**: 72ms (ä½)
- **è©•ä¼°**: ğŸŸ¢ ç©©å®šï¼Œå›æ‡‰æ™‚é–“ä¸€è‡´

#### 2. GET /api/user/profile
- **ä¸­ä½æ•¸ (P50)**: 220ms
- **95ç™¾åˆ†ä½ (P95)**: 269ms
- **ç©©å®šåº¦ (MAD)**: 20ms (æ¥µä½)
- **è©•ä¼°**: ğŸŸ¢ éå¸¸ç©©å®šï¼Œæœ€å¿«çš„ API

#### 3. POST /api/report/generate
- **ä¸­ä½æ•¸ (P50)**: 2642ms
- **95ç™¾åˆ†ä½ (P95)**: 3106ms
- **ç©©å®šåº¦ (MAD)**: 210ms (ä¸­)
- **è©•ä¼°**: ğŸŸ¡ è¼ƒæ…¢ä½†ç©©å®šï¼Œç¬¦åˆå ±è¡¨ç”Ÿæˆé æœŸ

#### 4. GET /api/search
- **ä¸­ä½æ•¸ (P50)**: 369ms
- **95ç™¾åˆ†ä½ (P95)**: 449ms
- **ç©©å®šåº¦ (MAD)**: 29.5ms (ä½)
- **è©•ä¼°**: ğŸŸ¢ å¿«é€Ÿä¸”ç©©å®š

#### 5. POST /api/batch/process
- **ä¸­ä½æ•¸ (P50)**: 1259ms
- **95ç™¾åˆ†ä½ (P95)**: 1742ms
- **ç©©å®šåº¦ (MAD)**: 271ms (ä¸­é«˜)
- **è©•ä¼°**: ğŸŸ¡ è®Šç•°åº¦è¼ƒé«˜ï¼Œç¬¦åˆæ‰¹æ¬¡è™•ç†ç‰¹æ€§

#### 6. GET /api/simulate
- **ä¸­ä½æ•¸ (P50)**: 2512ms
- **95ç™¾åˆ†ä½ (P95)**: 14412ms (!)
- **ç©©å®šåº¦ (MAD)**: 1620ms (é«˜)
- **è©•ä¼°**: ğŸŸ  è®Šç•°åº¦å¾ˆé«˜ï¼Œé€™æ˜¯æ­£å¸¸çš„ï¼ˆæ¨¡æ“¬ API åƒæ•¸éš¨æ©Ÿï¼‰

---

## ğŸ“Š è³‡æ–™å“è³ªè©•ä¼°

### âœ… å„ªé»

1. **æ¨£æœ¬å……è¶³**: æ‰€æœ‰ 6 å€‹ç«¯é»éƒ½è¶…éæœ€å°æ¨£æœ¬æ•¸ (50)
2. **åˆ†å¸ƒå‡å‹»**: å„ç«¯é»æ¨£æœ¬æ•¸æ¥è¿‘ï¼ˆ672-855 ç¯„åœï¼‰
3. **æ™‚é–“è¦†è“‹**: å·²æ¶µè“‹ 8 å€‹å°æ™‚çš„å·¥ä½œæ—¥æ™‚æ®µ
4. **è³‡æ–™å®Œæ•´**: Duration keys å’Œ Baseline keys æ•¸é‡ä¸€è‡´ (195)

### ğŸ“ˆ å¢é•·è¶¨å‹¢

æ ¹æ“š Trace Generator é…ç½®ï¼ˆ30 ç§’é–“éš”ï¼Œ6 APIsï¼‰ï¼š

- **æ¯å°æ™‚ç”¢ç”Ÿ**: ~120 å€‹ traces (6 APIs Ã— 20 cycles)
- **å¯¦éš›æ”¶é›†ç‡**: ~70% (è€ƒæ…®è™•ç†æ™‚é–“å’Œé‡è¤‡è³‡æ–™)
- **é è¨ˆæ¯å¤©å¢é•·**: ~2,000 å€‹æ¨£æœ¬

### âš ï¸ éœ€è¦æ³¨æ„

1. **æ™‚é–“è¦†è“‹æœ‰é™**: ç›®å‰åªæœ‰ 8/24 å°æ™‚æœ‰è³‡æ–™
2. **é€±æœ«è³‡æ–™å°‘**: ä¸»è¦æ˜¯å·¥ä½œæ—¥è³‡æ–™ï¼ˆä½†ä¹Ÿæœ‰éƒ¨åˆ†é€±æœ«è³‡æ–™ï¼‰
3. **Simulate API è®Šç•°å¤§**: P95 æ˜¯ä¸­ä½æ•¸çš„ 5.7 å€

---

## ğŸ¯ ç•°å¸¸æª¢æ¸¬æº–å‚™åº¦

### ç«¯é»æº–å‚™åº¦è©•ä¼°

| ç«¯é» | æ¨£æœ¬æ•¸ | æº–å‚™åº¦ | å‚™è¨» |
|------|--------|--------|------|
| POST /api/order/create | 855 | ğŸŸ¢ å„ªç§€ | è³‡æ–™å……è¶³ï¼Œbaseline ç©©å®š |
| GET /api/user/profile | 790 | ğŸŸ¢ å„ªç§€ | è³‡æ–™å……è¶³ï¼Œæœ€ç©©å®šçš„ç«¯é» |
| POST /api/report/generate | 725 | ğŸŸ¢ è‰¯å¥½ | è³‡æ–™å……è¶³ï¼Œç¬¦åˆé•·æ™‚é–“æ“ä½œç‰¹æ€§ |
| GET /api/search | 685 | ğŸŸ¢ è‰¯å¥½ | è³‡æ–™å……è¶³ï¼Œå›æ‡‰æ™‚é–“ç©©å®š |
| GET /api/simulate | 690 | ğŸŸ¡ å°šå¯ | è®Šç•°åº¦é«˜ï¼Œå¯èƒ½èª¤å ±ç‡è¼ƒé«˜ |
| POST /api/batch/process | 672 | ğŸŸ¢ è‰¯å¥½ | è³‡æ–™å……è¶³ï¼Œè®Šç•°åº¦å¯æ¥å— |

**ç¸½é«”è©•ä¼°**: ğŸŸ¢ **æ‰€æœ‰ç«¯é»éƒ½å·²æº–å‚™å¥½é€²è¡Œç•°å¸¸æª¢æ¸¬**

---

## ğŸ”§ å»ºè­°

### çŸ­æœŸï¼ˆ1-3 å¤©ï¼‰

1. âœ… **ç¹¼çºŒé‹è¡Œ Trace Generator**
   - è®“è³‡æ–™ç´¯ç©åˆ°å®Œæ•´çš„ 24 å°æ™‚è¦†è“‹
   - æ”¶é›†æ›´å¤šé€±æœ«è³‡æ–™

2. âœ… **ç›£æ§è³‡æ–™å“è³ª**
   ```bash
   # å®šæœŸæª¢æŸ¥
   watch -n 300 'curl -s http://localhost:8081/v1/available | jq .'
   ```

3. âœ… **æ¸¬è©¦ç•°å¸¸æª¢æ¸¬**
   - å°å„ç«¯é»æ¸¬è©¦æ­£å¸¸å’Œç•°å¸¸è«‹æ±‚
   - é©—è­‰é–¾å€¼è¨­å®šæ˜¯å¦åˆç†

### ä¸­æœŸï¼ˆ1-2 é€±ï¼‰

1. ğŸ“Š **å„ªåŒ–é–¾å€¼åƒæ•¸**
   - æ ¹æ“šå¯¦éš›è³‡æ–™èª¿æ•´ `factor` (ç›®å‰ 1.5)
   - æ ¹æ“šå¯¦éš›è³‡æ–™èª¿æ•´ `k` (ç›®å‰ 3)

2. ğŸ“ˆ **å»ºç«‹ç›£æ§å„€è¡¨æ¿**
   - è¿½è¹¤æ¨£æœ¬æ•¸å¢é•·
   - ç›£æ§ç•°å¸¸æª¢æ¸¬æº–ç¢ºåº¦

3. ğŸ” **åˆ†ææ™‚é–“æ¨¡å¼**
   - æ¯”è¼ƒä¸åŒæ™‚æ®µçš„æ•ˆèƒ½
   - è­˜åˆ¥å°–å³°æ™‚æ®µ

---

## ğŸ“‹ å¿«é€ŸæŸ¥è©¢å‘½ä»¤

### æŸ¥çœ‹ç¸½é«”çµ±è¨ˆ
```bash
curl -s http://localhost:8081/v1/available | jq .
```

### æŸ¥è©¢ç‰¹å®šç«¯é» baseline
```bash
# Order API
curl -s 'http://localhost:8081/v1/baseline?service=trace-demo-service&endpoint=POST%20%2Fapi%2Forder%2Fcreate&hour=12&dayType=weekday' | jq .

# User Profile API
curl -s 'http://localhost:8081/v1/baseline?service=trace-demo-service&endpoint=GET%20%2Fapi%2Fuser%2Fprofile&hour=12&dayType=weekday' | jq .
```

### æ¸¬è©¦ç•°å¸¸æª¢æ¸¬
```bash
# æ­£å¸¸è«‹æ±‚ (æ‡‰è©²è¿”å› isAnomaly: false)
curl -X POST http://localhost:8081/v1/anomaly/check \
  -H 'Content-Type: application/json' \
  -d '{"service":"trace-demo-service","endpoint":"POST /api/order/create","timestampNano":'$(date +%s)000000000',"durationMs":1000}' | jq .

# ç•°å¸¸è«‹æ±‚ (æ‡‰è©²è¿”å› isAnomaly: true)
curl -X POST http://localhost:8081/v1/anomaly/check \
  -H 'Content-Type: application/json' \
  -d '{"service":"trace-demo-service","endpoint":"POST /api/order/create","timestampNano":'$(date +%s)000000000',"durationMs":5000}' | jq .
```

### Redis è³‡æ–™æª¢æŸ¥
```bash
# æŸ¥çœ‹æ‰€æœ‰ baseline keys
docker exec tempo-anomaly-redis redis-cli KEYS "base:*"

# æŸ¥çœ‹ç‰¹å®š baseline å…§å®¹
docker exec tempo-anomaly-redis redis-cli HGETALL "base:trace-demo-service|POST /api/order/create|12|weekday"
```

---

## ğŸ“Œ çµè«–

### âœ… æˆåŠŸæŒ‡æ¨™

- âœ… **6 å€‹ç«¯é»å…¨éƒ¨æœ‰å……è¶³è³‡æ–™**ï¼ˆæœ€ä½ 672 å€‹æ¨£æœ¬ï¼‰
- âœ… **195 å€‹ baseline keys** å»ºç«‹å®Œæˆ
- âœ… **8 å€‹æ™‚é–“æ¡¶** æœ‰å®Œæ•´è³‡æ–™
- âœ… **æ‰€æœ‰ç«¯é»éƒ½å¯é€²è¡Œç•°å¸¸æª¢æ¸¬**

### ğŸ“Š è³‡æ–™å¥åº·åº¦

- **æ•´é«”è©•åˆ†**: ğŸŸ¢ **å„ªç§€** (85/100)
- **æ¨£æœ¬å……è¶³åº¦**: âœ… 100%
- **è³‡æ–™ç©©å®šæ€§**: âœ… è‰¯å¥½
- **æ™‚é–“è¦†è“‹åº¦**: ğŸŸ¡ 33% (æŒçºŒå¢é•·ä¸­)

### ğŸ¯ ä¸‹ä¸€æ­¥

ç³»çµ±å·²æº–å‚™å¥½é€²è¡Œç”Ÿç”¢ç’°å¢ƒç•°å¸¸æª¢æ¸¬ï¼å»ºè­°ï¼š
1. ç¹¼çºŒé‹è¡Œ Trace Generator ä»¥æ”¶é›†æ›´å¤šæ™‚æ®µçš„è³‡æ–™
2. é–‹å§‹æ¸¬è©¦ç•°å¸¸æª¢æ¸¬åŠŸèƒ½
3. æ ¹æ“šå¯¦éš›çµæœå¾®èª¿é–¾å€¼åƒæ•¸

---

**å ±å‘Šç”Ÿæˆæ™‚é–“**: 2026-01-23 12:06:00  
**è³‡æ–™æ–°é®®åº¦**: âœ… å³æ™‚
